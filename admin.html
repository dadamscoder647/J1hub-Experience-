<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#4f46e5" />
  <title>J1 Hub Â· Admin Dashboard</title>
  <style>
    :root {
      color-scheme: light;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background-color: #f8fafc;
      color: #0f172a;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .page-header {
      padding: 1.5rem clamp(1rem, 4vw, 2.5rem) 1rem;
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      color: #ffffff;
      text-align: left;
    }

    .page-header h1 {
      margin: 0;
      font-size: clamp(1.5rem, 4vw, 2.5rem);
      font-weight: 600;
    }

    .page-header p {
      margin: 0.5rem 0 0;
      max-width: 46rem;
      font-size: 1rem;
      line-height: 1.5;
    }

    main {
      flex: 1;
      padding: clamp(1rem, 3vw, 2.5rem);
    }

    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1.5rem;
      align-items: stretch;
    }

    .dashboard-tile {
      background: #ffffff;
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: 0 20px 40px -24px rgba(15, 23, 42, 0.45);
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .dashboard-tile header h2 {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
      color: #1f2937;
    }

    .dashboard-tile header p {
      margin: 0.25rem 0 0;
      color: #475569;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #ffffff;
      font-size: 0.95rem;
    }

    thead th {
      text-align: left;
      padding: 0.65rem 0.75rem;
      font-size: 0.8rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: #64748b;
      border-bottom: 1px solid #e2e8f0;
    }

    tbody td {
      padding: 0.75rem;
      border-bottom: 1px solid #f1f5f9;
      color: #1e293b;
    }

    tbody tr:last-child td {
      border-bottom: none;
    }

    .table-wrapper {
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      overflow: hidden;
    }

    .empty-state,
    .error-state {
      margin: 0;
      padding: 1rem;
      border-radius: 12px;
      background: #f8fafc;
      border: 1px dashed #cbd5f5;
      color: #475569;
      font-size: 0.95rem;
    }

    .info-note {
      margin: 0;
      padding: 0.9rem 1.1rem;
      border-radius: 12px;
      background: rgba(79, 70, 229, 0.08);
      border: 1px solid rgba(79, 70, 229, 0.16);
      color: #312e81;
      font-size: 0.95rem;
    }

    .primary-link,
    .secondary-link,
    .copy-button,
    .action-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 12px;
      padding: 0.9rem 1.1rem;
      font-size: 1rem;
      font-weight: 600;
      text-decoration: none;
      cursor: pointer;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
      text-align: center;
    }

    .primary-link,
    .action-button {
      background: #4f46e5;
      color: #ffffff;
      border: none;
      box-shadow: 0 12px 24px -18px rgba(79, 70, 229, 0.7);
    }

    .secondary-link {
      background: rgba(79, 70, 229, 0.12);
      color: #312e81;
      border: 1px solid rgba(79, 70, 229, 0.15);
    }

    .copy-button {
      background: #1e293b;
      color: #ffffff;
      border: none;
      min-width: 96px;
    }

    .primary-link:hover,
    .primary-link:focus,
    .secondary-link:hover,
    .secondary-link:focus,
    .copy-button:hover,
    .copy-button:focus,
    .action-button:hover,
    .action-button:focus {
      transform: translateY(-1px);
      box-shadow: 0 12px 28px -18px rgba(15, 23, 42, 0.35);
      outline: none;
    }

    .primary-link:focus,
    .secondary-link:focus,
    .copy-button:focus,
    .action-button:focus {
      box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.5);
    }

    .primary-link[aria-disabled="true"] {
      pointer-events: none;
      opacity: 0.6;
    }

    .copy-field {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      font-size: 0.9rem;
      color: #475569;
    }

    .copy-row {
      display: flex;
      gap: 0.65rem;
      flex-wrap: wrap;
    }

    .copy-row input {
      flex: 1;
      min-width: 180px;
      border-radius: 10px;
      border: 1px solid #cbd5f5;
      padding: 0.85rem 0.9rem;
      font-size: 0.95rem;
      background: #f8fafc;
      color: #1e293b;
    }

    .event-list {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .event-list li {
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      padding: 0.9rem 1rem;
      background: #f8fafc;
    }

    .event-title {
      display: block;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 0.35rem;
    }

    .event-meta {
      font-size: 0.85rem;
      color: #475569;
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem 0.65rem;
    }

    .event-meta span:last-child {
      font-weight: 600;
    }

    .links-stack {
      display: flex;
      flex-direction: column;
      gap: 0.65rem;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    @media (min-width: 720px) {
      main {
        padding-bottom: 3rem;
      }
    }
  </style>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js').catch(() => {
          /* noop */
        });
      });
    }
  </script>
</head>
<body
  data-hit-sheet-url="https://docs.google.com/spreadsheets/d/YOUR_HITLOGGER_SHEET_ID/edit#gid=0"
  data-checkin-readme="docs/checkin/README.md"
>
  <header class="page-header">
    <h1>Admin Dashboard</h1>
    <p>
      Quick read-only snapshots pulled from local data on this device. Use these tiles to confirm local onboarding progress,
      RSVP activity, and deployment links while getting the live dashboards in place.
    </p>
  </header>

  <main>
    <div class="dashboard-grid">
      <section class="dashboard-tile" id="onboarding-tile">
        <header>
          <h2>Onboarding Completions (local estimate)</h2>
          <p>Counts are based on onboarding progress stored in this browser&rsquo;s localStorage.</p>
        </header>
        <div class="tile-body">
          <div class="table-wrapper" aria-live="polite">
            <table aria-describedby="onboarding-summary">
              <thead>
                <tr>
                  <th scope="col">Property</th>
                  <th scope="col">Tasks Completed</th>
                  <th scope="col">Checklist Opened</th>
                </tr>
              </thead>
              <tbody id="onboarding-table-body"></tbody>
            </table>
          </div>
          <p class="empty-state" id="onboarding-empty" hidden>
            No onboarding data stored on this device yet. Ask a teammate to walk through the checklist to populate this demo.
          </p>
          <p class="error-state" id="onboarding-error" hidden>
            Unable to read onboarding storage. Check that this browser allows local data for the site.
          </p>
          <p id="onboarding-summary" class="sr-only"></p>
        </div>
      </section>

      <section class="dashboard-tile" id="events-tile">
        <header>
          <h2>Events this week</h2>
          <p>Upcoming events from <code>data/events.json</code> with RSVP state saved on this device.</p>
        </header>
        <div class="tile-body">
          <p id="events-summary" class="info-note" hidden></p>
          <p class="error-state" id="events-error" hidden>
            Couldn&rsquo;t load events. Try again after checking your connection or running the site from a local server.
          </p>
          <ul class="event-list" id="events-list" aria-live="polite"></ul>
        </div>
      </section>

      <section class="dashboard-tile" id="analytics-tile">
        <header>
          <h2>Scan Analytics</h2>
          <p>Open the hitlogger Google Sheet and share it with staff running scanners.</p>
        </header>
        <div class="tile-body links-stack">
          <a
            id="scan-analytics-link"
            class="primary-link"
            href="#"
            target="_blank"
            rel="noopener"
          >Open Google Sheet</a>
          <label class="copy-field" for="scan-analytics-url">
            <span>Shareable URL</span>
            <div class="copy-row">
              <input id="scan-analytics-url" type="text" readonly value="" />
              <button class="copy-button" type="button" data-copy-target="scan-analytics-url">Copy URL</button>
            </div>
          </label>
          <a class="secondary-link" href="docs/analytics/README.md" target="_blank" rel="noopener">
            View analytics setup guide
          </a>
        </div>
      </section>

      <section class="dashboard-tile" id="checkin-tile">
        <header>
          <h2>Check-in Webhook</h2>
          <p>Follow the deployment guide before staff scanners go live.</p>
        </header>
        <div class="tile-body links-stack">
          <a
            id="checkin-readme-link"
            class="primary-link"
            href="docs/checkin/README.md"
            target="_blank"
            rel="noopener"
          >Open deployment README</a>
          <a class="secondary-link" href="apps-script/Code.gs" target="_blank" rel="noopener">
            Download Apps Script code</a
          >
        </div>
      </section>
    </div>
  </main>

  <div class="sr-only" id="dashboard-status" role="status" aria-live="polite"></div>

  <script type="module" src="js/admin.js"></script>
</body>
</html>
